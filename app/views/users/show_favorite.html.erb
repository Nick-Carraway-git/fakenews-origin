<!-- user-profile-boxは後でパーシャル化(show, show_follow) -->
<%= render 'user_profile', user: @user %>

<!-- partial化 -->
<div class="menu-tab-box">
  <ul class="nav nav-tabs nav-justified">
    <li class="nav-item menu-tab">
      <% if @title.blank? %>
        <%= link_to user_path(@user), class: 'nav-link active' do %>
          <span>メインメニュー</span>
        <% end %>
      <% else %>
        <%= link_to user_path(@user), class: 'nav-link' do %>
          <span>メインメニュー</span>
        <% end %>
      <% end %>
    </li>
    <li class="nav-item menu-tab">
      <% if @title == 'Following' %>
        <%= link_to following_user_path(@user), class: 'nav-link active' do %>
          <span>フォロー中</span>
        <% end %>
      <% else %>
        <%= link_to following_user_path(@user), class: 'nav-link' do %>
          <span>フォロー中<span>
        <% end %>
      <% end %>
    </li>
    <li class="nav-item menu-tab">
      <% if @title == 'Followers' %>
        <%= link_to followers_user_path(@user), class: 'nav-link active' do %>
          <span>フォロワー</span>
        <% end %>
      <% else %>
        <%= link_to followers_user_path(@user), class: 'nav-link' do %>
          <span>フォロワー</span>
        <% end %>
      <% end %>
    </li>
    <li class="nav-item menu-tab">
      <% if @title == 'Favorite Articles' %>
        <%= link_to favoring_user_path(@user), class: 'nav-link active' do %>
          <span>お気に入り</span>
        <% end %>
      <% else %>
        <%= link_to favoring_user_path(@user), class: 'nav-link' do %>
          <span>お気に入り</span>
        <% end %>
      <% end %>
    </li>
  </ul>
</div>

<!-- partial化候補 ただしcolが異なるので注意 -->
<div class="user-articles-box">
  <div class="row">
    <div class="col-12">
      <h5 class="user-articles-heading"><%= @title %></h5>
      <% if @articles.any? %>
        <div class="row">
          <% @articles.each do |article| %>
            <button type="button" class="modal-button col-4" style="display:inline-block;" data-toggle="modal" data-target="#mordal-<%= article.id %>">
              <%= image_tag article.image.variant(combine_options:{resize:"900x900^",crop:"900x900+0+0",gravity: :center}).processed, class: "thumbnail img-thumbnail" %>
              <div class="mask">
            		<div class="caption"><%= article.title %></div>
            	</div>
            </button>
            <% @mordal_article = article %>
            <ol class="articles">
              <%= render 'articles/article_mordal', article: @mordal_article %>
            </ol>
          <% end %>
        </div>
      <% else %>
        <h5 class="not-found-message">Articles are not found.</h5>
      <% end %>
    </div>
  </div>
</div>
